import{_ as b,p as S,d as y,s as I,a as R,f as z}from"./index.33dde8d4.js";import{_ as N}from"./\u6B4C\u5355.34921638.js";import{V as P,r,o as d,c as h,b as s,t as a,F as u,u as v,f as U,h as _,d as l,w as g,p as V,g as E}from"./vendor.632c8900.js";const T={data(){return{playlist_msg:[],playlist_img:"",playlist_title:"",playlist_tracks:[],playlist_count:"",playtrackCount:"",playlist_tags:[],description:"",commentCount:"",comments:[],page:{currentPage:1,pagesize:20,tableData:[],show_comment:[],pre:0},currentRowIndex:"",id:""}},async created(){window.scrollTo(0,0),this.id=this.$route.query.id,console.log(this.id),await this.Playlist_detail(this.id)},mounted(){},components:{video_play:P},methods:{Playlist_detail(e){S({id:e}).then(t=>{console.log(t),t.playlist.coverImgUrl=t.playlist.coverImgUrl+"?param=150y150",this.playlist_msg=t,this.playlist_img=t.playlist.coverImgUrl,console.log(this.playlist_img),this.playlist_tracks=t.playlist.tracks,this.$store.commit("saveSong_list",this.playlist_tracks),this.playlist_title=t.playlist.name,this.playlist_count=t.playlist.playCount,this.playtrackCount=t.playlist.trackCount,this.playlist_tags=t.playlist.tags,this.description=t.playlist.description,this.commentCount=t.playlist.commentCount,this.Comment_playlist(this.id,this.commentCount),this.playlist_tracks.forEach(o=>{o.dt=y(o.dt)})}).catch(t=>{console.log(t)})},Song_detail(e){setTimeout(()=>{I({id:e.privileges[this.currentRowIndex].id}).then(t=>{this.$store.commit("saveSong_url",t.data[0].url),R({ids:e.privileges[this.currentRowIndex].id}).then(o=>{this.$store.commit("saveSong_img",o.songs[0].al.picUrl),this.$store.commit("saveSong_name",o.songs[0].name),this.$store.commit("saveSong_singer",o.songs[0].ar[0].name),this.$store.commit("saveSong_dt",y(o.songs[0].dt)),this.$store.commit("saveSong_time",o.songs[0].dt)})})},0),this.$store.commit("saveNow_index",this.currentRowIndex)},tableRowClassName({row:e,rowIndex:t}){e.index=t},onRowClick(e){this.currentRowIndex=e.index,this.$store.commit("saveNow_index",this.currentRowIndex)},Comment_playlist(e){z({id:e}).then(t=>{t.comments.forEach(o=>{o.user.avatarUrl=o.user.avatarUrl+"?param=50y50"}),this.page.tableData=t.comments,this.comments=t.comments,this.page.show_comment=this.comments.slice(this.page.pre,this.page.pre+20)})},handleCurrentChange(e){this.page.currentPage=e,this.page.pre=20*(e-1),this.page.show_comment=this.comments.slice(this.page.pre,this.page.pre+20)},handleSizeChange(e){this.page.pagesize=e},handleScroll(){const e=document.documentElement.scrollTop||document.body.scrollTop;for(let t=0;t<this.playlist_tracks.length;t++)this.playlist_tracks[t].top<=e+this.visualHeight&&!this.playlist_tracks[t].after&&(console.log("\u52A0\u8F7D",this.playlist_tracks[t].name),this.playlist_tracks[t].after=!0,this.$forceUpdate())},getElementHeight(){this.$refs.test.forEach((t,o)=>{this.playlist_tracks[o].top=t.getBoundingClientRect().top,this.playlist_tracks[o].after=!1})}},watch:{}},p=e=>(V("data-v-776d8dfd"),e=e(),E(),e),B={class:"main"},D={class:"head"},j={class:"img"},F=["src"],H={class:"inform"},q={class:"song_name_div"},L=p(()=>s("div",{style:{width:"50px",height:"50px"}},[s("img",{style:{width:"100%",height:"100%"},src:N,alt:""})],-1)),A={class:"song_name"},G=p(()=>s("div",null,null,-1)),J={class:"tags"},K=_(" \u6807\u7B7E: "),M={key:0},O={class:"playlist"},Q={class:"song_form_head"},W=p(()=>s("span",{style:{"font-size":"28px","font-weight":"200","padding-right":"20px"}}," \u6B4C\u66F2\u5217\u8868 ",-1)),X=_(" \u64AD\u653E: "),Y={style:{color:"red"}},Z=_(" \u6B21 "),$={class:"song_form"},tt={class:"comment"},st={class:"comment_head"},et=p(()=>s("span",{style:{"font-size":"28px","font-weight":"200","padding-right":"20px"}},"\u8BC4\u8BBA",-1)),ot=p(()=>s("div",null,null,-1)),it={class:"new_comment",style:{"border-bottom":"1px solid #ddd"}},lt={class:"new_comment_head"},at={style:{width:"50px",height:"50px"}},nt=["src"],ct={class:"context"},rt={class:"name"},dt={style:{color:"#0c73c2","font-size":"12px"}},ht=_(" : "),_t={style:{"font-size":"12px"}},pt={class:"time",style:{"font-size":"12px",color:"#999999","padding-top":"5px"}},mt=p(()=>s("div",{class:"aside"},null,-1));function gt(e,t,o,ut,i,m){const c=r("el-table-column"),w=r("VideoPlay"),f=r("el-icon"),x=r("tamplate"),C=r("el-table"),k=r("el-pagination");return d(),h(u,null,[s("div",B,[s("div",D,[s("div",j,[s("img",{src:i.playlist_img},null,8,F)]),s("div",H,[s("div",q,[L,s("div",A,a(i.playlist_title),1)]),G,s("div",J,[K,(d(!0),h(u,null,v(i.playlist_tags,n=>(d(),h("span",{key:n},a(n),1))),128))]),i.description!=""?(d(),h("div",M,"\u4ECB\u7ECD\uFF1A "+a(i.description),1)):U("",!0)])]),s("div",O,[s("div",Q,[s("div",null,[W,_(" "+a(i.playtrackCount)+"\u9996\u6B4C ",1)]),s("div",null,[X,s("span",Y,a(i.playlist_count),1),Z])]),s("div",$,[l(C,{ref:"test","row-class-name":m.tableRowClassName,onRowClick:m.onRowClick,data:i.playlist_tracks,style:{width:"100%"},"row-style":{height:"30px"},"cell-style":{padding:"0px"}},{default:g(()=>[l(c,{type:"index",width:"54",height:"25"}),l(c,{type:"",width:"45",height:"30"},{default:g(()=>[l(x,null,{default:g(()=>[l(f,{style:{width:"25px",height:"40px",cursor:"pointer"},class:"icon",onClick:t[0]||(t[0]=n=>m.Song_detail(i.playlist_msg))},{default:g(()=>[l(w,{style:{width:"100%",height:"100%","vertical-align":"middle"}})]),_:1})]),_:1})]),_:1}),l(c,{prop:"name","show-overflow-tooltip":!0,label:"\u6B4C\u66F2\u6807\u9898",width:"235",height:"30"}),l(c,{prop:"dt",label:"\u65F6\u957F",width:"110",height:"30"}),l(c,{prop:"ar[0].name","show-overflow-tooltip":!0,label:"\u6B4C\u624B",width:"90",height:"30"}),l(c,{prop:"al.name","show-overflow-tooltip":!0,label:"\u4E13\u8F91",height:"30"})]),_:1},8,["row-class-name","onRowClick","data"])])]),s("div",tt,[s("div",st,[s("div",null,[et,_(" \u5171"+a(i.commentCount)+" \u6761\u8BC4\u8BBA ",1)])]),ot,s("div",it,[s("div",lt,"\u6700\u65B0\u8BC4\u8BBA("+a(i.commentCount)+")",1),(d(!0),h(u,null,v(i.page.show_comment,n=>(d(),h("div",{class:"new_comment_main",key:n},[s("div",at,[s("img",{style:{widht:"100%",height:"100%"},src:n.user.avatarUrl,alt:""},null,8,nt)]),s("div",ct,[s("div",rt,[s("span",dt,a(n.user.nickname),1),ht,s("span",_t,a(n.content),1)]),s("div",pt,a(n.timeStr),1)])]))),128)),l(k,{style:{"text-align":"center"},background:"",layout:"prev, pager, next",onCurrentChange:m.handleCurrentChange,"current-page":i.page.currentPage,total:i.page.tableData.length,"page-size":i.page.pagesize},null,8,["onCurrentChange","current-page","total","page-size"])])])]),mt],64)}var ft=b(T,[["render",gt],["__scopeId","data-v-776d8dfd"]]);export{ft as default};
