import{_ as w,t as y,i as b,j as v}from"./index.1b19008d.js";import{_ as h}from"./\u5706\u5708.be2b3e72.js";import{r as f,o,c as n,b as e,F as d,u as g,t as c,d as x,p as D,g as k}from"./vendor.632c8900.js";const C={name:"album",data(){return{weekData:[],totalData:[],comments:[],page:{currentPage:1,pagesize:20,tableData:[],pre:0},playlist_hight:[],query_cat:"",total:"",catlist:{categories:[],sub:[],category:[],category0:[],category1:[],category2:[],category3:[],category4:[]},category:[],playlist_imgs:[]}},async created(){window.scrollTo(0,0),await this.Top_album(),await this.Album_new()},methods:{Top_album(){y().then(t=>{console.log("top"),this.weekData=t,console.log(t),this.weekData.forEach(i=>{i.picUrl=i.picUrl+"?param=130y130"})})},Album_new(){b().then(s=>{this.totalData=s.albums,this.total=s.total,this.page.tableData=s.albums,this.page.tableData.forEach(l=>{l.picUrl=l.picUrl+"?param=130y130"}),this.playlist_hight=this.page.tableData.slice(this.page.pre,this.page.pre+20)});let t=0,i=setInterval(async()=>{await v({offset:100}).then(s=>{t+=100,this.page.tableData=this.page.tableData.concat(s.albums),this.page.tableData.forEach(l=>{l.picUrl=l.picUrl+"?param=130y130"})}),console.log(t),t>=300&&clearInterval(i)},300)},go_playlist(t){console.log(t),this.$router.push({path:"/album_item",query:{id:t}})},async handleCurrentChange(t){window.scrollTo(0,0),this.page.currentPage=t,this.page.pre=20*(t-1),this.playlist_hight=this.page.tableData.slice(this.page.pre,this.page.pre+20),console.log(t,this.page.currentPage)}}},_=t=>(D("data-v-36b505b0"),t=t(),k(),t),U={class:"main"},z={class:"hotRecommend"},I=_(()=>e("div",{class:"hotRecommend_head"},[e("div",{style:{width:"16px",height:"16px"}},[e("img",{style:{width:"100%",height:"100%"},src:h,alt:""})]),e("span",{class:"headLine"},"\u70ED\u95E8\u63A8\u8350")],-1)),R={class:"hotRecommend_list"},j={class:"list_li"},E=["onClick","src"],P={style:{width:"150px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",padding:"5px 0px"}},S={style:{width:"150px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",color:"#666666","font-size":"12px"}},T=_(()=>e("div",{class:"hotRecommend_head"},[e("div",{style:{width:"16px",height:"16px"}},[e("img",{style:{width:"100%",height:"100%"},src:h,alt:""})]),e("span",{class:"headLine"},"\u5168\u90E8\u65B0\u789F")],-1)),B={class:"hotRecommend_list"},L={class:"list_li"},q=["onClick","src"],A={style:{width:"150px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",padding:"5px 0px"}},F={style:{width:"150px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",color:"#666666","font-size":"12px"}};function N(t,i,s,l,r,p){const u=f("el-pagination");return o(),n("div",U,[e("div",z,[e("div",null,[e("div",null,[I,e("div",R,[(o(!0),n(d,null,g(r.weekData,a=>(o(),n("ul",{key:a.id},[e("li",null,[e("div",j,[e("img",{onClick:m=>p.go_playlist(a.id),src:a.picUrl,style:{width:"100%",height:"100%"},alt:""},null,8,E)]),e("p",P,c(a.name),1),e("p",S,c(a.artists[0].name),1)])]))),128))])]),T,e("div",B,[(o(!0),n(d,null,g(r.playlist_hight,a=>(o(),n("ul",{key:a.id},[e("li",null,[e("div",L,[e("img",{onClick:m=>p.go_playlist(a.id),src:a.picUrl,style:{width:"100%",height:"100%"},alt:""},null,8,q)]),e("p",A,c(a.name),1),e("p",F,c(a.artists[0].name),1)])]))),128))]),e("div",null,[x(u,{style:{"text-align":"center"},background:"",layout:"prev, pager, next",onCurrentChange:p.handleCurrentChange,"current-page":r.page.currentPage,total:300,"page-size":r.page.pagesize},null,8,["onCurrentChange","current-page","page-size"])])])])])}var J=w(C,[["render",N],["__scopeId","data-v-36b505b0"]]);export{J as default};
