import{_ as w,o as _,d as r,s as y,a as v,q as x}from"./index.1b19008d.js";import{V as f,r as a,o as k,c as b,b as c,d as s,w as h}from"./vendor.632c8900.js";const R={name:"search",data(){return{s:"",type:1,playlist_msg:[],playlist_tracks:[],currentRowIndex:""}},async created(){this.s=this.$route.query.s,await this.Search(this.s)},components:{video:f},methods:{Search(e){_({keywords:e,type:this.type}).then(t=>{this.playlist_msg=t,this.playlist_tracks=t.result.songs,console.log(this.playlist_tracks),this.$store.commit("saveSong_list",this.playlist_tracks),this.playlist_tracks.forEach(o=>{o.duration=r(o.duration)})})},Song_detail(e){setTimeout(()=>{y({id:e[this.currentRowIndex].id}).then(t=>{this.$store.commit("saveSong_url",t.data[0].url)}),this.$store.commit("saveNow_index",this.currentRowIndex),v({ids:e[this.currentRowIndex].id}).then(t=>{this.$store.commit("saveSong_img",t.songs[0].al.picUrl),this.$store.commit("saveSong_name",t.songs[0].name),this.$store.commit("saveSong_singer",t.songs[0].ar[0].name),this.$store.commit("saveSong_dt",r(t.songs[0].dt)),this.$store.commit("saveSong_time",t.songs[0].dt)})},0)},tableRowClassName({row:e,rowIndex:t}){e.index=t},onRowClick(e){this.currentRowIndex=e.index,this.$store.commit("saveNow_index",this.currentRowIndex)}},components:{footer_:x},watch:{"$route.query.s"(e,t){_({keywords:e,type:this.type}).then(o=>{this.playlist_msg=o,this.playlist_tracks=o.result.songs,console.log(this.playlist_tracks),this.$store.commit("saveSong_list",this.playlist_tracks),this.playlist_tracks.forEach(l=>{l.duration=r(l.duration)})})}}},S={class:"floor"};function $(e,t,o,l,d,n){const i=a("el-table-column"),m=a("VideoPlay"),p=a("el-icon"),u=a("el-table"),g=a("footer_");return k(),b("div",null,[c("div",null,[c("div",null,[s(u,{"row-class-name":n.tableRowClassName,onRowClick:n.onRowClick,data:d.playlist_tracks,style:{width:"100%"},"row-style":{height:"30px"},"cell-style":{padding:"0px"}},{default:h(()=>[s(i,{type:"index",width:"54",height:"25"}),s(i,{type:"",width:"45",height:"30"},{default:h(()=>[s(p,{style:{width:"25px",height:"40px",cursor:"pointer"},class:"icon",onClick:t[0]||(t[0]=C=>n.Song_detail(d.playlist_tracks))},{default:h(()=>[s(m,{style:{width:"100%",height:"100%","vertical-align":"middle"}})]),_:1})]),_:1}),s(i,{prop:"name","show-overflow-tooltip":!0,label:"\u6B4C\u66F2\u6807\u9898",width:"235",height:"30"}),s(i,{prop:"duration",label:"\u65F6\u957F",width:"110",height:"30"}),s(i,{prop:"artists[0].name","show-overflow-tooltip":!0,label:"\u6B4C\u624B",width:"90",height:"30"}),s(i,{prop:"album.name","show-overflow-tooltip":!0,label:"\u4E13\u8F91",height:"30"})]),_:1},8,["row-class-name","onRowClick","data"])])]),c("div",S,[s(g)])])}var V=w(R,[["render",$]]);export{V as default};
