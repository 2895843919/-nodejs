import{_ as f,k,d as u,s as S,a as R,C as z}from"./index.33dde8d4.js";import{_ as I}from"./\u6B4C\u5355.34921638.js";import{V as N,r as c,o as m,c as r,b as t,t as n,f as V,h as d,d as i,w as p,F as w,u as D,p as P,g as j}from"./vendor.632c8900.js";const B={name:"album_item",data(){return{playlist_msg:[],playlist_img:"",playlist_title:"",playlist_tracks:[],playlist_count:"",playtrackCount:"",playlist_tags:[],description:"",commentCount:"",comments:[],page:{currentPage:1,pagesize:20,tableData:[],show_comment:[],pre:0},currentRowIndex:"",id:""}},async created(){this.id=this.$route.query.id,await this.top_album_list(this.id),await this.Comment_album(this.id)},components:{video_play:N},methods:{top_album_list(s){k({id:s}).then(e=>{console.log(e),this.playlist_msg=e.album,this.playlist_img=e.album.picUrl,this.playlist_tracks=e.songs,this.$store.commit("saveSong_list",this.playlist_tracks),this.playlist_title=e.album.name,this.description=e.album.description,this.commentCount=e.album.info.commentCount,this.Comment_playlist(this.id),this.playlist_tracks.forEach(g=>{g.dt=u(g.dt)})}).catch(e=>{console.log(e)})},Song_detail(s){console.log(s[0].al.id),setTimeout(()=>{S({id:s[this.currentRowIndex].id}).then(e=>{this.$store.commit("saveSong_url",e.data[0].url)}),this.$store.commit("saveNow_index",this.currentRowIndex),R({ids:s[this.currentRowIndex].id}).then(e=>{console.log(e),this.$store.commit("saveSong_img",e.songs[0].al.picUrl),this.$store.commit("saveSong_name",e.songs[0].name),this.$store.commit("saveSong_singer",e.songs[0].ar[0].name),this.$store.commit("saveSong_dt",u(e.songs[0].dt)),this.$store.commit("saveSong_time",e.songs[0].dt)})},0)},tableRowClassName({row:s,rowIndex:e}){s.index=e},onRowClick(s){this.currentRowIndex=s.index,this.$store.commit("saveNow_index",this.currentRowIndex)},Comment_album(s){z({id:s}).then(e=>{console.log(e),this.page.tableData=e.comments,this.comments=e.comments,this.page.show_comment=this.comments.slice(this.page.pre,this.page.pre+20),console.log(this.page.show_comment)})},handleCurrentChange(s){this.page.currentPage=s,this.page.pre=20*(s-1),this.page.show_comment=this.comments.slice(this.page.pre,this.page.pre+20)},handleSizeChange(s){this.page.pagesize=s}},watch:{}},_=s=>(P("data-v-bba66b20"),s=s(),j(),s),U={class:"main"},E={class:"head"},F={class:"img"},T=["src"],q={class:"inform"},L={class:"song_name_div"},A=_(()=>t("div",{style:{width:"50px",height:"50px"}},[t("img",{style:{width:"100%",height:"100%"},src:I,alt:""})],-1)),G={class:"song_name"},H=_(()=>t("div",null,null,-1)),J={key:0},K={class:"playlist"},M={class:"song_form_head"},O=_(()=>t("span",{style:{"font-size":"28px","font-weight":"200","padding-right":"20px"}}," \u6B4C\u66F2\u5217\u8868 ",-1)),Q=d(" \u64AD\u653E: "),W={style:{color:"red"}},X=d(" \u6B21 "),Y={class:"song_form"},Z={class:"comment"},$={class:"comment_head"},tt=_(()=>t("span",{style:{"font-size":"28px","font-weight":"200","padding-right":"20px"}},"\u8BC4\u8BBA",-1)),et=_(()=>t("div",null,null,-1)),st={class:"new_comment",style:{"border-bottom":"1px solid #ddd"}},ot={style:{width:"50px",height:"50px"}},it=["src"],nt={class:"context"},at={class:"name"},lt={style:{color:"#0c73c2","font-size":"12px"}},ct=d(" : "),_t={style:{"font-size":"12px"}},dt={class:"time"},ht=_(()=>t("div",{class:"aside"},null,-1));function mt(s,e,g,rt,o,h){const a=c("el-table-column"),v=c("video_play"),y=c("el-icon"),b=c("tamplate"),x=c("el-table"),C=c("el-pagination");return m(),r(w,null,[t("div",U,[t("div",E,[t("div",F,[t("img",{src:o.playlist_img},null,8,T)]),t("div",q,[t("div",L,[A,t("div",G,n(o.playlist_title),1)]),H,o.description!=""?(m(),r("div",J,"\u4ECB\u7ECD\uFF1A "+n(o.description),1)):V("",!0)])]),t("div",K,[t("div",M,[t("div",null,[O,d(" "+n(o.playtrackCount)+"\u9996\u6B4C ",1)]),t("div",null,[Q,t("span",W,n(o.playlist_count),1),X])]),t("div",Y,[i(x,{"row-class-name":h.tableRowClassName,onRowClick:h.onRowClick,data:o.playlist_tracks,style:{width:"100%"},"row-style":{height:"30px"},"cell-style":{padding:"0px"}},{default:p(()=>[i(a,{type:"index",width:"54",height:"25"}),i(a,{type:"",width:"45",height:"30"},{default:p(()=>[i(b,null,{default:p(()=>[i(y,{style:{width:"25px",height:"40px",cursor:"pointer"},class:"icon",onClick:e[0]||(e[0]=l=>h.Song_detail(o.playlist_tracks))},{default:p(()=>[i(v,{style:{width:"100%",height:"100%"}})]),_:1})]),_:1})]),_:1}),i(a,{prop:"name","show-overflow-tooltip":!0,label:"\u6B4C\u66F2\u6807\u9898",width:"235",height:"30"}),i(a,{prop:"dt",label:"\u65F6\u957F",width:"110",height:"30"}),i(a,{prop:"ar[0].name","show-overflow-tooltip":!0,label:"\u6B4C\u624B",width:"90",height:"30"}),i(a,{prop:"al.name","show-overflow-tooltip":!0,label:"\u4E13\u8F91",height:"30"})]),_:1},8,["row-class-name","onRowClick","data"])])]),t("div",Z,[t("div",$,[t("div",null,[tt,d(" \u5171"+n(o.commentCount)+" \u6761\u8BC4\u8BBA ",1)])]),et,t("div",st,[(m(!0),r(w,null,D(o.page.show_comment,l=>(m(),r("div",{class:"new_comment_main",key:l},[t("div",ot,[t("img",{style:{widht:"100%",height:"100%"},src:l.user.avatarUrl,alt:""},null,8,it)]),t("div",nt,[t("div",at,[t("span",lt,n(l.user.nickname),1),ct,t("span",_t,n(l.content),1)]),t("div",dt,n(l.timeStr),1)])]))),128)),i(C,{style:{"text-align":"center"},background:"",layout:"prev, pager, next",onCurrentChange:h.handleCurrentChange,"current-page":o.page.currentPage,total:o.page.tableData.length,"page-size":o.page.pagesize},null,8,["onCurrentChange","current-page","total","page-size"])])])]),ht],64)}var wt=f(B,[["render",mt],["__scopeId","data-v-bba66b20"]]);export{wt as default};
